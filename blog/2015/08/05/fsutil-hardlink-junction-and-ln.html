<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta name="description" content="Mickir's Blog">
  <meta name="author" content="Yeoman Zhuang">
  <meta name="keywords" content="快捷方式、符号链接、硬链接与软链接——win/linux, Yeoman Zhuang, Yeoman Zhuang">
  <title>快捷方式、符号链接、硬链接与软链接——win/linux - Yeoman Zhuang</title>
  <link rel="canonical" href="http://mickir.ml/blog/2015/08/05/fsutil-hardlink-junction-and-ln.html">
  <link rel="icon" href="/res/img/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/res/img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/res/css/public.css">
  <link rel="stylesheet" href="/res/css/light.css">
  <script src="/res/js/light.js"></script>
  <script src="/res/js/toc.js" ></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?030d137055b3efca4921b91be1694cc4";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
</head>
<body>
  <div id="blog">
    <div class="sidebar">
  <div class="profilepic">
    <a href="/"><img src="http://7xkunb.com1.z0.glb.clouddn.com/头1.jpg" alt="logo"></img></a>
  </div>
  <h1 class="title"><a href="/">Mickir's Blog</a></h1>
  <h2 class="sub-title">有很多这样的时刻。你惊心动魄，而世界一无所知。你翻山越岭，而天地寂静无声。人生说到底，是一场一个人的战争。</h2>
  <nav id="nav">
    <ul>
    
      <li><a href="/page/timing.html"><i class="fa fa-clock-o"></i>&nbsp;时间轴</a></li>
    
      <li><a href="/page/category.html"><i class="fa fa-tags"></i>&nbsp;分类</a></li>
    
      <li><a href="/page/read.html"><i class="fa fa-book"></i>&nbsp;阅读</a></li>
    
      <li><a href="/page/about.html"><i class="fa fa-paper-plane-o"></i>&nbsp;关于</a></li>
    
    </ul>
  </nav>  
  <nav id="sub-nav">
    <a class="weibo " href="http://weibo.com/mickir" title="新浪微博" target="_blank"><i class="fa fa-weibo"></i></a>
    <a class="github" href="http://github.com/zyeoman" title="GitHub" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    <a class="rss" href="/page/feed.xml" title="RSS订阅" target="_blank"><i class="fa fa-rss"></i></a>
  </nav>
  <div id="license">
    <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank" title="本站所有作品采用：&#10;知识共享《署名 非商业性使用 相同方式共享 3.0》&#10;进行许可" >
    <img alt="License" height="31" width="88" src="data:image/png;base64,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" /></a>
  </div>
</div>

    <div class="main">
        <div id="toc" class="toc">
    </div>
<header class="post-header">
  <h1 class="post-title"><a href="/blog/2015/08/05/fsutil-hardlink-junction-and-ln.html">快捷方式、符号链接、硬链接与软链接——win/linux</a></h2>
  <p class="post-meta">
    <i class="fa fa-calendar"></i>
    2015年08月05日
    <i class="space"></i>
    
    <i class="fa fa-tags"></i>
    <a class="post-category" href="/page/category.html#windows">windows</a>
    
    <i class="fa fa-tags"></i>
    <a class="post-category" href="/page/category.html#linux">linux</a>
    
    
    <a class="post-category" href="/page/category.html#"></a>
    
  </p>
</header>
<div class="post-main">
<h2 id="含义">含义</h2>

<h3 id="快捷方式">快捷方式</h3>

<p>仅仅是一个二进制文件或者是文本文件，存储有快捷方式目标的地址(文件地址或者网络地址)</p>

<h3 id="符号连接">符号连接</h3>

<p>也是保存的地址，在linux中符号连接等同于软链接，在windows中符号链接也与软链接类似，不同点是符号链接支持相对路径并且文件夹和文件都支持，同时不会像快捷方式那样跳转。</p>

<h3 id="硬链接和软链接">硬链接和软链接</h3>

<p>硬链接与软链接都可以理解成原文件的一个镜像，在应用层看来是一样的。同时，修改源文件的时候都会同步修改链接的文件，因此，当你需要做文件镜像时候，或者同一个文件存到不同位置又需要同步变化的时候，就不需要每次更改以后重新复制一遍了。</p>

<!-- more -->

<h4 id="不同点">不同点</h4>

<p>硬链接指向的是文件系统中的节点(inode)，而软链接指向的是文件系统的路径(path)，这就造成了两者根本的不同，也是造成两者各种不同的原因。</p>

<ul>
<li>硬链接是与路径无关的，硬链接的文件共用文件系统中的节点，因此除了创建硬链接时，硬链接是没有源文件与目标文件的区别的。软链接是与路径相关的，因此如果源文件移动了以后软链接就不能用了，这点就类似windows里的快捷方式了，但是与快捷方式又不同。在linux和windows中的快捷方式(.desktop/.lnk)都仅仅是文本文件或者二进制文件而已，而软链接以后的文件在应用层是与源文件完全相同的。</li>
<li>同样由于与路径的关系，硬链接只能连接文件，而软链接可以连接文件或者文件夹。</li>
<li>硬链接只能在同一个文件系统内链接，软链接不受文件系统的约束</li>
<li>在linux中，硬链接只能有超级用户建立。</li>
</ul>

<h2 id="windows">Windows</h2>

<h3 id="快捷方式">快捷方式</h3>

<p>直接右键发送到。命令行比较难，大多都是写vbs脚本等等实现。</p>

<h3 id="符号链接">符号链接</h3>

<ul>
<li>命令</li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">创建符号链接。

MKLINK [[/D] | [/H] | [/J]] Link Target

        /D      创建目录符号链接。默认为文件
                符号链接。
        /H      创建硬链接，而不是符号链接。
        /J      创建目录联接。
        Link    指定新的符号链接名称。
        Target  指定新链接引用的路径
                (相对或绝对)。
</code></pre></div>
<h3 id="硬链接">硬链接</h3>

<p>在Windows建立硬链接是只适用于NTFS文件系统的，使用命令<code>fsutil hardlink</code></p>

<ul>
<li>命令语法，例子是把<code>bar.txt</code> 硬链接上 <code>foo.txt</code></li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">D:\user\user&gt;fsutil hardlink create
用法 : fsutil hardlink create &lt;new filename&gt; &lt;existing filename&gt;
例如 : fsutil hardlink create c:\foo.txt c:\bar.txt
</code></pre></div>
<ul>
<li>API 函数</li>
</ul>
<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="n">BOOL</span> <span class="nf">CreateHardLink</span><span class="p">(</span>
     <span class="n">LPCTSTR</span> <span class="n">lpFileName</span><span class="p">,</span>
     <span class="n">LPCTSTR</span> <span class="n">lpExistingFileName</span><span class="p">,</span>
     <span class="n">LPSECURITY_ATTRIBUTES</span> <span class="n">lpSecurityAttributes</span>
<span class="p">);</span>
</code></pre></div>
<p>适用于win2000及以上版本系统，最后一个参数保留，必须为<code>NULL</code></p>

<h3 id="软链接">软链接</h3>

<p>在NTFS中的软链接，微软叫做junction，但是windows中建立软链接没有现成的命令，可以从<a href="http://www.microsoft.com/technet/sysinternals/FileAndDisk/Junction.mspx">microsoft官网</a>下载junction.exe并放到<code>C://Windows/System32/</code>文件夹中进行扩展，但是这里的软链接只能连接文件夹</p>

<ul>
<li>junction命令语法，其中例子是把windows文件夹链接上link文件夹</li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">D:\user\user&gt;junction

Junction v1.06 - Windows junction creator and reparse point viewer
Copyright (C) 2000-2010 Mark Russinovich
Sysinternals - www.sysinternals.com

The first usage is for displaying reparse point information, the
second usage is for creating a junction point, and the last for
deleting a junction point:
usage: junction [-s] [-q] &lt;file or directory&gt;
       -q     Don&#39;t print error messages (quiet)
       -s     Recurse subdirectories

usage: junction &lt;junction directory&gt; &lt;junction target/existing&gt;
       example: junction d:\link c:\windows

usage: junction -d &lt;junction directory&gt;
</code></pre></div>
<ul>
<li>API函数</li>
</ul>
<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="n">BOOL</span> <span class="n">WINAPI</span> <span class="nf">CreateSymbolicLink</span><span class="p">(</span>
   <span class="n">__in</span>   <span class="n">LPCWSTR</span> <span class="n">lpSymlinkFileName</span><span class="p">,</span>
   <span class="n">__in</span>   <span class="n">LPCWSTR</span> <span class="n">lpTargetFileName</span><span class="p">,</span>
   <span class="n">__in</span>   <span class="n">DWORD</span> <span class="n">dwFlags</span>
<span class="p">);</span>
</code></pre></div>
<p>参数：</p>

<p>lpSymlinkFileName 要创建的符号链接名称.</p>

<p>lpTargetFileName 符号链接所对应目标的名称.</p>

<p>dwFlags 标识目标是文件还是目录. 取值0x0 代表是文件，SYMBOLIC_LINK_FLAG_DIRECTORY或0x1 代表是目录</p>

<p>这个要VISTA以上版本才支持。</p>

<h3 id="其他方法">其他方法</h3>

<p>使用Cygwin或者mingw中的ln</p>

<h2 id="linux">Linux</h2>

<h3 id="快捷方式">快捷方式</h3>

<p>快捷方式比较烦。在桌面上就是一个<code>.desktop</code>文件。一般格式为</p>
<div class="highlight"><pre><code class="language-ini" data-lang="ini"><span class="k">[Desktop Entry]</span>
<span class="na">Encoding</span><span class="o">=</span><span class="s">UTF-8</span>
<span class="na">Version</span><span class="o">=</span><span class="s">1.0                                     #version of an app.</span>
<span class="na">Name[en_US]</span><span class="o">=</span><span class="s">yEd                                 #name of an app.</span>
<span class="na">GenericName</span><span class="o">=</span><span class="s">GUI Port Scanner                    #longer name of an app.</span>
<span class="na">Exec</span><span class="o">=</span><span class="s">java -jar /opt/yed-3.11.1/yed.jar          #command used to launch an app.</span>
<span class="na">Terminal</span><span class="o">=</span><span class="s">false                                  #whether an app requires to be run in a terminal</span>
<span class="na">Icon[en_US]</span><span class="o">=</span><span class="s">/opt/yed-3.11.1/icons/yicon32.png   #location of icon file.</span>
<span class="na">Type</span><span class="o">=</span><span class="s">Application                                #type</span>
<span class="na">Categories</span><span class="o">=</span><span class="s">Application;Network;Security;        #categories in which this app should be listed.</span>
<span class="na">Comment[en_US]</span><span class="o">=</span><span class="s">yEd Graph Editor                 #comment which appears as a tooltip.</span>
</code></pre></div>
<p>更快速的命令行方法在<code>GNOME</code> <code>KDE</code> <code>xfce</code> <code>Cinnamon</code> <code>LXDE</code>中都不同，详见<a href="https://linux.cn/article-2289-1.html">此处</a></p>

<h3 id="软硬链接与符号链接">软硬链接与符号链接</h3>

<p>在linux里软硬连接就很简单了，都是使用<code>ln</code>命令 ，其中硬链接是<code>ln</code>软链接是<code>ln -s</code></p>

<ul>
<li>语法</li>
</ul>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">ln <span class="o">[</span>options<span class="o">]</span> existingfile newfile  
ln<span class="o">[</span>options<span class="o">]</span> existingfile-list directory   
</code></pre></div>
<hr>

<h2 id="reference">Reference</h2>

<p><a href="http://cai555.iteye.com/blog/480231">windows中对应linux的ln命令</a></p>

<p><a href="http://blog.csdn.net/hairetz/article/details/4168296">关于硬链接和软链接（符号链接）的区别</a></p>

<p><a href="https://blog.alphatr.com/windows-mklink.html">Windows 的快捷方式，符号链接，软链接和硬链接</a></p>

<p><a href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-104-6/index.html">学习 Linux，101: 创建和更改硬链接和符号链接</a></p>

<p><a href="https://linux.cn/article-2289-1.html">如何在Linux的桌面上创建快捷方式或启动器</a></p>

</div>
<div class="share">
  <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
  </div>
  <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":["qzone","tsina","weixin","sqq"],"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/res/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</div>
<div class="pagination">

<a class="pagination-item newer" href="/blog/2015/08/04/Fix-Highlight-Bug.html"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;修复Jekyll里Markdown代码高亮问题</a>


<span class="pagination-item older">下一篇&nbsp;<i class="fa fa-chain-broken"></i></span>

</div>
<style>#ds-reset .ds-avatar, #ds-reset .ds-avatar img{border-radius:50%;}</style>
<script type="text/javascript">var duoshuoQuery = {short_name:"mickir"};(function(){var ds = document.createElement('script');ds.type = 'text/javascript';ds.async = true;ds.src = '/res/js/embed.js';ds.charset = 'UTF-8';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);})();</script>
<div class="comments">
  <div class="ds-thread" data-title="快捷方式、符号链接、硬链接与软链接——win/linux" data-thread-key="/blog/2015/08/05/fsutil-hardlink-junction-and-ln" data-url="http://mickir.ml/blog/2015/08/05/fsutil-hardlink-junction-and-ln.html"></div>
</div>
    <footer>Copyright&nbsp;&copy;&nbsp;2015 <a href="http://mickir.ml">Yeoman Zhuang</a><br/><i class="fa fa-cogs" style="color:blueviolet;">&nbsp;</i>Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a></footer>
    </div>
  </div>    
  <div id="top"><a id="rocket" href="javascript:;" title="返回顶部"><i></i></a></div>
  <script src="http://cdn.bootcss.com/mathjax/2.4.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>MathJax.Hub.Config({tex2jax:{inlineMath: [['$','$']],displayMath: [['$$','$$']],processEscapes: true}});</script>
  <script type="text/javascript">$(document).ready(function() {$('#toc').toc();}); </script>
</body>
</html>